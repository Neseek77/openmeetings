<?xml version="1.0" encoding="UTF-8"?>

<canvas debug="true" width="100%" height="100%" fontsize="14" title="OpenMeetings - Computer testing">
	
	<debug fontsize="14" oninit="Debug.showInternalProperties = true"/>

<include href="lang/en.lzx"/>

<include href="lib/"/>

            <tabs name="mainTabs">
               <tabpane selected="true" text="${mess.home}">
					<simplelayout axis="y" spacing="5"/>
                    <text text="${mess.welcome}" multiline="true" width="${this.parent.width - 20}" />
                    <nextButton nextTabpane="${this.parent.parent.soundTab}" text="${mess.next}" />
                </tabpane>

                <tabpane text="${mess.sound}" name="soundTab" onselect="Debug.write('focus'); audioplayer.play();">
					    <view id="audioplayer" play="false" y="40" resource="http:resources/Star_in_the_east_solfege.mp3" oninit="this.stop();">
					        <attribute name="vol" value="100"/>
					        <view>
					            <simplelayout axis="x" spacing="-1"/>
					           <button width="40" onclick="audioplayer.stop()">
					                <view resource="resources/stop.png" y="6" align="center"/>
					            </button>
					            <button width="40" onclick="audioplayer.play()">
					                <view resource="resources/play.png" y="5" align="center"/>
					            </button>
					        </view>
					        
					        <view>
					            <simplelayout axis="x" spacing="-1"/>
					            <button width="40" onclick="audioplayer.setVolume( audioplayer.getVolume() -10)">
					                    -<view resource="resources/mix_volume.png" y="5" align="right"/>
					                </button>
					            <button width="40" onclick="audioplayer.setVolume( audioplayer.getVolume() +10)">
					                    +<view resource="resources/mix_volume.png" y="5" align="right"/>
					                </button>
					        </view>
					        
					        <simplelayout axis="x" spacing="10"/>
					        <view name="background" bgcolor="black" width="202" height="15" y="50" options="ignorelayout;">
					            <view name="loadbar" resource="resources/audio_scrubtrack.png" width="${audioplayer.loadperc * 200}">
					            <view name="playbar" resource="resources/audio_scrubber.png" y="1" x="${Math.round(180 * audioplayer.frame/audioplayer.totalframes)}"/>
					            </view>
					        </view>
					    </view>
					<simplelayout axis="y" spacing="5"/>
                    <text text="${mess.listen_sound}" multiline="true" width="${this.parent.width - 20}" />

					<view>
					        <simplelayout axis="x" spacing="10"/>
					           <button text="${mess.no}">					                
					            </button>
					           <button text="${mess.yes}">					                
					            </button>
					</view>
                    <nextButton nextTabpane="${this.parent.parent.microTab}" text="${mess.next}" />
                    
                </tabpane>                
                
                <tabpane text="${mess.micro}" name="microTab">
					<simplelayout axis="y" spacing="5"/>
                    <text text="${mess.microRecord}" multiline="true" width="${this.parent.width - 20}" />
					        <view>
					            <simplelayout axis="x" spacing="-1"/>
					           <button width="40" onclick="audioplayer.stop()">
					                <view resource="resources/play.png" y="6" align="center"/>
					            </button>
					            <button width="40" onclick="audioplayer.play()">
					                <view resource="resources/record.png" y="5" align="center"/>
					            </button>
					        </view>
					        
					        <view>
					            <simplelayout axis="x" spacing="-1"/>
					            <button width="40" onclick="audioplayer.setVolume( audioplayer.getVolume() -10)">
					                    -<view resource="resources/mix_volume.png" y="5" align="right"/>
					                </button>
					            <button width="40" onclick="audioplayer.setVolume( audioplayer.getVolume() +10)">
					                    +<view resource="resources/mix_volume.png" y="5" align="right"/>
					                </button>
					        </view>
                    <nextButton nextTabpane="${this.parent.parent.webcamTab}" text="${mess.next}" />
                </tabpane>                

                <tabpane text="${mess.webcam}" name="webcamTab">
					<simplelayout axis="y" spacing="5"/>
                    <text text="${mess.webcamText}" multiline="true" width="${this.parent.width - 20}" />
		<view id="v1" layout="axis:y; spacing:4">
			<videoview id="live" type="rtmp" stream="$once{canvas.s1}" width="240" height="160">
				<camera id="cam" show="true" fps="20" width="240" height="160" 
																picturequality="0"/>
				<microphone id="mic" capturing="false"/>
				
			</videoview>
		</view>                    
                    <nextButton nextTabpane="${this.parent.parent.messTab}" text="${mess.next}" />
                </tabpane>                

                <tabpane text="${mess.bandwidth}" name="messTab">
					<simplelayout axis="y" spacing="5"/>
                    <text text="${mess.bandwidthText}" multiline="true" width="${this.parent.width - 20}" />
                    <nextButton nextTabpane="${this.parent.parent.latencyTab}" text="${mess.next}" />
                </tabpane>                

                <tabpane text="${mess.latency}" name="latencyTab">
					<simplelayout axis="y" spacing="5"/>
                    <text text="${mess.latencyText}" multiline="true" width="${this.parent.width - 20}" />
                    <nextButton nextTabpane="${this.parent.parent.synthesisTab}" text="${mess.next}" />
                </tabpane>                

                <tabpane text="${mess.synthesis}" name="synthesisTab">
					<simplelayout axis="y" spacing="5"/>
                    <text text="${mess.synthesisText}" multiline="true" width="${this.parent.width - 20}" />
                </tabpane>                
            </tabs>

	
	<rtmpconnection src="rtmp://192.168.0.1/xmlcrm/hibernate" autoconnect="true"/>
	<mediastream name="s1" type="rtmp"/>
	<mediastream name="s2" type="rtmp"/>
	<simplelayout/>

<!--	
	<text multiline="true" width="100%"> Instructions:
		<br/> 1. Either run a flash media server on localhost (127.0.0.1), or ssh tunnel to a
		media server at a known host
		<br/> 2. Press the broadcast button. (Grant camera access permission if needed.) The
		button should change to say "stop broadcasting"
		<br/> 3. Press the receive button. You should be receiving audio and video from
		yourself and the button should say "stop receiving."
		<br/> 4. Try out the audio and video mute buttons. The video mute should freeze the
		received picture. The audio mute should silence the received sound.
		<br/> 5. Press the receive button. The received video should freeze and the button
		should say "stop receiving".
		<br/> 6. Press the receive button again. The video should resume and the button should
		say "receiving".
		<br/> 7. Press the broadcast button. The received video should freeze and the button
		should say "broadcast".<br/> <br/> The indicator below shows the status of the video
		connection.
		</text>
-->	
</canvas>