<?xml version="1.0" encoding="UTF-8" ?>
<library>

<class name="htmlbg" extends="view" >
	<view name="htmlbgstuff" visible="${ canvas.htmlframeisloaded }" bgcolor="0xCCCCCC" 
		x="260" y="24" width="540" height="${ canvas.height-24 }">
		
		<view x="2" bgcolor="black" name="_htmlside" id="_htmlside" y="2" width="400" height="20" >
			<method name="getText">
				return this._ctext.getText();
			</method>
			<method name="setText" args="txt">
				this._ctext.setText(txt);
			</method>
			<inputtext name="_ctext" width="${ parent.width-2 }" height="${ parent.height-2 }"
				x="1" y="1" bgcolor="white" text="www.google.fr">
				<method event="onkeyup" args="key">
	                <![CDATA[
	                // 13 is return
	                if ((key==27) || (key==13)) {
	                	this.parent.parent._button.onclick.sendEvent();
	                }
	                ]]>
	            </method>
	            <handler name="onfocus">
	            	Debug.write("onfocus");
	            	this.setSelection(0,this.getText().length);
	            	LzFocus.setFocus(this);	
	            	this.setSelection(0,this.getText().length);
	            </handler>
	            <handler name="onclick">
	            	Debug.write("onclick");
	            	this.setSelection(0,this.getText().length);
	            	LzFocus.setFocus(this);	
	            	this.setSelection(0,this.getText().length);
	            </handler>
				<handler name="oninit">
					LzFocus.setFocus(this);	
				</handler>	            
			</inputtext>		
		</view>
		<button name="_button" text="Load Page" y="2" x="424" height="20" width="80">
			<handler name="onclick">
				<![CDATA[
		  		canvas.addBroswerTabHistory(this.parent._htmlside.getText());
		  		this.sendEvent();
				]]>
			</handler>
			<method name="sendEvent">
				<![CDATA[
				canvas.ifrm.setAttribute('isrc','http://'+this.parent._htmlside.getText());
		  		var tempSendArray = new Array ();
		  		tempSendArray[0] = 'sharewhiteside';
		  		tempSendArray[1] = datumsString;
				tempSendArray[2] = this.parent._htmlside.getText();
		  		Debug.write("send: ",tempSendArray);
		  		canvas.VarsModeratorGeneral = tempSendArray;
		  		rtc.sendVarsModeratorGeneral.call();	
		  		]]>		
			</method>
		</button>
		<basedrawchoose resourceN="close" width="18" height="18"
			x="520" y="2">
			<handler name="onclick">
				if ( canvas.htmlframeisloaded){
					canvas.ifrm.hide();
					canvas.setAttribute('htmlframeisloaded',false);
				}
			</handler>
		</basedrawchoose>		
		<view y="24" resource="htmlbg" x="2">
		</view>
	</view>
</class>

<!-- ###################
	Class wwwtab
 -->
<class name="wwwtab" extends="basedokeoscharttab" >

	<view name="_uploadtaboutput" x="4" y="4" height="${ parent.height }" >

		<method name="openbroowser">
			if ( canvas.htmlframeisloaded){
			} else {
		  		var tempSendArray = new Array ();
		  		tempSendArray[0] = 'sharewhiteinit';
		  		tempSendArray[1] = datumsString;

		  		Debug.write("send: ",tempSendArray);
		  		canvas.VarsModeratorGeneral = tempSendArray;
		  		rtc.sendVarsModeratorGeneral.call();
			
				canvas.ifrm.createIFrame();
				canvas.setAttribute('htmlframeisloaded',true);
			}
		</method>

		<button y="2" height="20" enabled="${ !canvas.htmlframeisloaded }" >ReOpen browser
			<handler name="onclick">
				parent.openbroowser();
			</handler>
		</button>
		<!-- 
		<button y="24" height="20" >Bookmark this page
			<handler name="onclick">

				
			</handler>
		</button>
		 -->	
		 <text text="History: " fontsize="12" y="24"/>
		<view y="44" height="${ parent.height - 50 }" width="250" bgcolor="0xFFFFFF" 
			id="_browserhistory" clip="true">	
			<handler name="oninit">
				<![CDATA[
				for (var i=0;i<canvas.browserTabHistory.length;i++){
					new browserhistoryItem(this,{urlname:canvas.browserTabHistory[i]});
				}
				]]>
			</handler>
			<method name="addItem" args="val">
				new browserhistoryItem(this.histroy,{urlname:val});
			</method>
			<view name="histroy" layout="axis:y;spacing:2" />
			<vscrollbar name="myscrollbar" />
		</view>

	</view>
</class>

<class name="browserhistoryItem" extends="view" bgcolor="0x000000" height="19" width="260" 
    onmouseover="this._text.setBGColor(0x799FCE)" onmouseout="this._text.setBGColor(white)" >
    <handler name="onclick">
        _browserhistory.parent.openbroowser();
		_htmlside.setText(this.urlname);
		_htmlside.parent._button.sendEvent();
    </handler>
    <attribute name="urlname" value="" type="string" />
    
    <text name="_text" text="${ parent.urlname }" width="260" fontsize="10" height="18" bgcolor="white" >
   
    </text>
	
    <tooltip text="click to open" />
</class>

</library>