<?xml version="1.0" encoding="UTF-8" ?>
<library>
 
<class name="chooseorganisationwindow" extends="labelexplorerbox" labelid="145"
    docking="true" width="400" x="200" y="0" height="200">
    
    <attribute name="saveObj" value="null" />
    <attribute name="refObj" value="null" />
    <attribute name="processNextIndex" value="0" type="number" />
	<attribute name="errorid" value="0" type="number" />
    
    <handler name="oninit">
        LzModeManager.makeModal(this);
    </handler>
    
    <handler name="onclose">
        LzModeManager.release(this);
    </handler>
	
	<netremotecallhib name="getErrorByCode" funcname="errorservice.getErrorByCode" remotecontext="$once{ canvas.thishib }" >      
		<netparam name="vars1"><method name="getValue"> return canvas.sessionId; </method></netparam>
		<handler name="ondata" args="value">
			Debug.write("getErrorByCode ",value);
			//this.parent.destroy();
			this.parent._errortext.setText(value.errmessage);
		</handler>
	</netremotecallhib>		
	
    <labeltext labelid="161" width="200" y="510" resize="false" x="2"/>     
    <view name="_organisationslist" y="510" x="120" width="270" height="100" 
    	bgcolor="$once{ canvas.basebgcolorizer }" >
    	<method name="addItem" args="txt,value">
    		new simplelistItem(this.content.content.inn,{text:txt,value:value,width:this.width});
    	</method>
    	<method name="getAllItems">
    		<![CDATA[
    		var a = new Array();
    		for (var i=0;i<this.content.content.inn.subviews.length;i++){
    			Debug.write("t: ",this.content.content.inn.subviews[i].value);
    			a.push(Number(this.content.content.inn.subviews[i].value));
    		}
    		return a;
    		]]>
    	</method>
    	<method name="clearList">
    		for (var eg in this.content.content.inn.subviews){
    			this.content.content.inn.subviews[eg].destroy();
    		}
    	</method>
    	<view name="content" width="$once{ parent.width-2 }" height="$once{ parent.height-2 }"
    		x="1" y="1" clip="true" bgcolor="0xFFFFFF">
    		<view name="content" >
    			<view name="inn" layout="axis:y;spacing:2" />
    		</view>
    		<vscrollbar />
    	</view>
    </view>
	
	<simplelabelbutton labelid="163" x="200" >
		<handler name="onclick">
			this.parent.close();
		</handler>
	</simplelabelbutton>
    
</class>

</library>