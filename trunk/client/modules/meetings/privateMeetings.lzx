<?xml version="1.0" encoding="UTF-8" ?>
<library>
	<!---
		This class shows usable private conference room list.
		The list would created from roomListItem object that was declared in modules/conference/conference/roomListItem.lzx.
		 
	-->
	<class name="privateMeetings" extends="baseContentView">
		<handler name="ontabcontentleave">
			canvas._chartcontentRPC = null;
			canvas.thishib.removeClientFromChatNotification.doCall();
		</handler>
		
	      <!-- label: meeting room -->
		<labelText fontstyle="bold" y="10" labelid="128" />
		
		<!-- Declared conference rooms list -->
		<view y="60" x="20">
		      <handler name="oninit">
		            canvas.thishib.roomtype = "private";
		            this.getRoomsByOrganisationAndType.doCall();
		      </handler>    
		        
		      <netRemoteCallHib name="getRoomsByOrganisationAndType" funcname="conferenceservice.getRoomsByOrganisationAndType" remotecontext="$once{ canvas.thishib }" >   
			      <netparam><method name="getValue">return canvas.sessionId;</method></netparam>  
			      <netparam><method name="getValue">return hib.currentdomainObj.organisation_id;</method></netparam>  
			      <netparam><method name="getValue">return 1;</method></netparam>  
				
				<handler name="ondata" args="value">	
					<![CDATA[
				      	if (value!=null){
					      	for(var eg=0;eg<value.length;eg++){
				      	      	new roomListItem(parent.inn.inn.inn,{currentusers:value[eg].room.currentusers,
									      	      					obj:value[eg],
									      	      					ispublic:false,
									      	      					roomid:value[eg].room.rooms_id,
									      	      					starttime:parseDateToStringTime(value[eg].room.starttime),
									      	      					roomname:value[eg].room.name
									      	      					});
				            }
				        }
				    ]]>	        	          				
				</handler>	
		      </netRemoteCallHib> 
		 
		 	<!-- inn.inn.inn view would be setted object by above ondata hander. -->
		      <view name="inn" width="480" height="500" bgcolor="$once{ canvas.basebgcolorizer }" >
				<view name="inn" x="1" y="1" width="478" height="498" bgcolor="0xFFFFFF" clip="true" >
			  		<view name="inn" layout="axis:y;spacing:2"/>
			  		<vscrollbar />
			  	</view>
			</view>
		</view>
		
		<!-- description panel for eache room. right hand on this class view.
			roomListDetails class are declared in modules/conference/conference/roomListDetails.lzx.
				Mar 24 2008 commented by onokeiji@gmal.com
		 -->
		<roomListDetails x="510" y="50" name="_roomlistdetails" />
	</class>
</library>
