<?xml version="1.0" encoding="UTF-8" ?>
<library>

<class name="calendarwindow" extends="view" bgcolor="$once{ canvas.basebgcolorizer }">

	<attribute name="fieldRef" value="null" />
	
	<view x="${ this.parent.width-19 }" y="1" resource="explorer_button_rsc"
		onmouseover="this.setResourceNumber(2)"
		onmouseout="this.setResourceNumber(1)"
		onmousedown="this.setResourceNumber(3)">
		<handler name="onmouseup">
			this.setResourceNumber(1);
			this.parent.destroy();
		</handler>									
	</view>	

	<dateselector y="20" name="_dateselector">
		<handler name="oninit">
			<![CDATA[
			Debug.write("dateselector oninit. ",this);
			var t = parent.fieldRef.getText();
			var newDate = parseStringToDate(t);
			this.showingdate = newDate;
			Debug.write("n1:",this.showingdate);
			this.init();
			]]>
		</handler>
		<handler name="ondoubleselect" args="d">
			parent.fieldRef.setText(parseDateToString(d));
			this.parent.destroy();
		</handler>
	</dateselector>	

</class>

</library>